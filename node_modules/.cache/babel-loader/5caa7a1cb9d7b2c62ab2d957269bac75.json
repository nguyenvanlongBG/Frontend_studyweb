{"ast":null,"code":"import ChooseComponent from \"./ChooseComponent.vue\";\nimport CommentQuestionComponent from \"./CommentQuestionComponent.vue\";\nimport LatexComponent from \"../LatexComponent.vue\";\nimport ConfirmComponent from '../common/ConfirmComponent.vue';\nimport { ref } from '@vue/reactivity';\nimport { handleQuestionTest } from '../../services/question';\nimport { Transition } from \"vue\";\nimport NoteComponent from \"../common/NoteComponent.vue\";\nimport VueMultiselect from 'vue-multiselect';\nexport default {\n  name: \"QuestionComponent\",\n  components: {\n    ChooseComponent,\n    LatexComponent,\n    ConfirmComponent,\n    CommentQuestionComponent,\n    Transition,\n    NoteComponent,\n    VueMultiselect\n  },\n  props: ['question', 'index', 'isNormal', 'type', 'isOwner', 'listItemsSubject'],\n\n  setup() {\n    const render = ref(true);\n    const confirmModal = ref(false);\n    const infoQuestion = ref([]);\n    const pressUpdate = ref(false);\n    const canEssay = ref(false);\n    const canUpdate = ref(false);\n    const handleQuestion = ref({\n      'question': {},\n      'answer': {}\n    });\n    const writeResult = ref({});\n    const result = ref(-1);\n    const essayAnswer = ref({});\n    const answerUpdate = ref(new Map());\n    const answerDelete = ref(new Set());\n    const answerCreate = ref(new Map());\n    const page = ref(1);\n    const canChoose = ref(false);\n    const answer = ref(-1);\n    const displayNote = ref(false);\n    const styleObject = ref({\n      \"box-shadow\": \"0 5px #666\",\n      \"transform\": \"translateY(4px)\"\n    });\n    const styleQuestion = ref(\"info-question\");\n    const valueItemsSubject = ref([]);\n    return {\n      render,\n      result,\n      writeResult,\n      handleQuestion,\n      essayAnswer,\n      answerUpdate,\n      answerDelete,\n      answerCreate,\n      styleQuestion,\n      confirmModal,\n      pressUpdate,\n      page,\n      styleObject,\n      infoQuestion,\n      canEssay,\n      canUpdate,\n      canChoose,\n      answer,\n      displayNote,\n      valueItemsSubject\n    };\n  },\n\n  created() {\n    // Câu hỏi thường\n    if (this.type == 0) {\n      this.canEssay = this.isUpdateEssay;\n      this.canChoose = false;\n    } // Câu hỏi thi\n\n\n    if (this.type == 1) {\n      this.canUpdate = false;\n      this.canEssay = true;\n      this.canChoose = true;\n    } // Câu hỏi cập nhật\n\n\n    if (this.type == 2) {\n      this.canUpdate = true;\n      this.canEssay = false;\n      this.canChoose = true;\n    } // Câu hỏi lịch sử làm bài\n\n\n    if (this.type == 3) {\n      this.canEssay = false;\n      this.canChoose = false;\n    }\n\n    if (this.type == 4) {\n      this.canEssay = false;\n      this.canChoose = false;\n    }\n\n    this.infoQuestion = JSON.parse(JSON.stringify(this.question));\n    this.handleQuestion.question = this.question.question;\n    this.page = this.question.page;\n  },\n\n  mounted() {\n    if (this.type == 1) {\n      if (this.question.question.type == 2) {\n        if (this.question.question?.answer != null) {\n          let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.question.question.answer);\n          choose.click();\n        }\n      }\n    }\n\n    if (this.type == 2) {\n      if (this.question.question.type == 2) {\n        if (this.question.question?.result_id != null && this.question.question?.result_id != \"\") {\n          let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.question.question.result_id);\n          choose.click();\n        }\n      }\n    }\n\n    if (this.type == 3) {\n      if (this.question.question?.result_id != null) {\n        if (this.question.question.type == 2) {\n          if (this.question.question.answer != null) {\n            console.log(\"OK\");\n\n            if (this.question.question.result_id == this.question.question.answer) {\n              let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.answer);\n              choose.style.border = \"4px solid rgb(16, 249, 4)\";\n              let question = document.getElementById(\"question_\" + this.question.question.question_id);\n              question.style.border = \"4px solid rgb(16, 249, 4)\";\n            } else {\n              let chooseCorrect = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.result_id);\n              chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\";\n              let chooseFalse = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.answer);\n              chooseFalse.style.border = \"4px solid red\";\n              let question = document.getElementById(\"question_\" + this.question.question.question_id);\n              question.style.border = \"4px solid red\";\n            }\n          } else {\n            let chooseCorrect = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.result_id);\n            chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\";\n          }\n        }\n\n        if (this.question.question.type == 1) {\n          if (this.question.question.contentResult == this.question.question.answer) {\n            let chooseCorrect = document.getElementById(this.question.question.question_id + '_result_' + this.infoQuestion.question.result_id);\n            chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\";\n            let chooseAnswer = document.getElementById(this.question.question.question_id + '_answer');\n            chooseAnswer.style.border = \"4px solid rgb(16, 249, 4)\";\n          } else {\n            let chooseCorrect = document.getElementById(this.question.question.question_id + '_result_' + this.infoQuestion.question.result_id);\n            chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\";\n            let chooseFalse = document.getElementById(this.question.question.question_id + '_answer');\n            chooseFalse.style.border = \"4px solid red\";\n          }\n        }\n      }\n    }\n  },\n\n  methods: {\n    back() {\n      this.pressUpdate = false;\n      this.canEssay = false;\n      this.render = false;\n      this.canChoose = false;\n      this.handleQuestion = ref({});\n      this.writeResult = ref({});\n      this.essayAnswer = ref({});\n      this.answerUpdate = ref(new Map());\n      this.answerDelete = ref(new Set());\n      this.answerCreate = ref(new Map());\n      this.answer = ref(-1);\n      this.$nextTick(() => {\n        this.render = true;\n      });\n    },\n\n    answerQuestion(answer) {\n      this.answer = answer;\n    },\n\n    publicQuestion() {},\n\n    updateQuestion() {\n      this.pressUpdate = true;\n      this.canEssay = true;\n      this.canChoose = true;\n    },\n\n    updateContentQuestion(data) {\n      // this.questionUpdate.id = this.infoQuestion.question.question_id\n      this.handleQuestion.question.content = data; // this.questionUpdate.id = this.infoQuestion.question.question_id\n    },\n\n    updateChoose(choose) {\n      if (('' + choose.id).includes('new')) {\n        choose.question_id = this.infoQuestion.question.question_id;\n        this.answerCreate.set(choose.id, choose);\n      } else {\n        choose.question_id = this.infoQuestion.question.question_id;\n        this.answerUpdate.set(choose.id, choose);\n      }\n    },\n\n    createChoose(data) {\n      data.question_id = this.infoQuestion.question.question_id;\n      this.answerCreate.set(data.id, data);\n    },\n\n    deleteAnswer(id) {\n      if (this.infoQuestion.question.type == 2) {\n        if (id == this.infoQuestion.question.result_id || this.infoQuestion.question.result_id == null) {\n          this.answer = null;\n        }\n      }\n\n      if (('' + id).includes('new')) {\n        // Xóa câu hỏi trắc nghiệm mới tạo\n        this.answerCreate.delete(id);\n      } else {\n        if (this.answerUpdate.get(id) != undefined) {\n          this.answerUpdate.delete(id);\n        }\n\n        this.answerDelete.add(id);\n      }\n    },\n\n    deleteQuestion() {\n      this.pressUpdate = false;\n      this.confirmModal = true;\n    },\n\n    confirmDelete() {\n      const idQuestion = this.question.question.question_id;\n      const deleteQuestion = {\n        'id': idQuestion,\n        'index': this.index\n      };\n\n      if (this.infoQuestion.question.type == 2) {\n        this.infoQuestion.choices.forEach(choose => {\n          this.deleteAnswer(choose.id);\n        });\n      } else {\n        this.deleteAnswer(this.infoQuestion.question.result_id);\n      }\n\n      this.$emit(\"delete\", deleteQuestion);\n      this.confirmModal = false;\n    },\n\n    async confirmUpdate() {\n      this.pressUpdate = false;\n      this.canEssay = false;\n      this.canChoose = false;\n\n      if (this.infoQuestion.question.type == 2) {\n        this.handleQuestion.question.result_id = this.answer;\n      } else {\n        this.handleQuestion.question.contentResult = this.answer;\n\n        if (Number.isInteger(this.infoQuestion.question.result_id)) {\n          let data = {\n            question_id: this.infoQuestion.question.question_id,\n            id: this.infoQuestion.question.result_id,\n            content: this.answer\n          };\n          this.answerUpdate.set(this.infoQuestion.question.result_id, data);\n        } else {\n          let data = {\n            question_id: this.infoQuestion.question.question_id,\n            id: this.infoQuestion.question.result_id,\n            content: this.answer\n          };\n          this.answerCreate.set(this.infoQuestion.question.result_id, data);\n        }\n      }\n\n      this.handleQuestion.answer.create = Array.from(this.answerCreate.values());\n      this.handleQuestion.answer.update = Array.from(this.answerUpdate.values());\n      console.log(\"Update choose\");\n      console.log(this.handleQuestion.answer.update);\n      this.handleQuestion.answer.delete = Array.from(this.answerDelete.values());\n      console.log(\"Send Data\");\n      console.log(this.handleQuestion);\n      const response = await handleQuestionTest(this.handleQuestion);\n      this.infoQuestion = response.data;\n      this.render = false;\n      this.$nextTick(() => {\n        this.render = true;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ChooseComponent","CommentQuestionComponent","LatexComponent","ConfirmComponent","ref","handleQuestionTest","Transition","NoteComponent","VueMultiselect","name","components","props","setup","render","confirmModal","infoQuestion","pressUpdate","canEssay","canUpdate","handleQuestion","writeResult","result","essayAnswer","answerUpdate","Map","answerDelete","Set","answerCreate","page","canChoose","answer","displayNote","styleObject","styleQuestion","valueItemsSubject","created","type","isUpdateEssay","JSON","parse","stringify","question","mounted","choose","document","getElementById","question_id","click","result_id","console","log","style","border","chooseCorrect","chooseFalse","contentResult","chooseAnswer","methods","back","$nextTick","answerQuestion","publicQuestion","updateQuestion","updateContentQuestion","data","content","updateChoose","id","includes","set","createChoose","deleteAnswer","delete","get","undefined","add","deleteQuestion","confirmDelete","idQuestion","index","choices","forEach","$emit","confirmUpdate","Number","isInteger","create","Array","from","values","update","response"],"sourceRoot":"","sources":["G:\\Dự án Web học tập\\studyweb\\src\\components\\Question\\QuestionComponent.vue"],"sourcesContent":["<template>\r\n    <div :class=\"styleQuestion\" v-if=\"render\">\r\n        <div class=\"question-not-note\">\r\n            <div class=\"action-question\">\r\n                <button class=\"tool-button-test\" :style=\"pressUpdate ? styleObject : null\" @click=\"publicQuestion\"\r\n                    v-if=\"canUpdate\">\r\n                    Diễn đàn\r\n                </button>\r\n                <button class=\"tool-button-test\" :style=\"pressUpdate ? styleObject : null\" @click=\"updateQuestion\"\r\n                    v-if=\"canUpdate\">\r\n                    Sửa\r\n                </button>\r\n                <button class=\"tool-button-test\" @click=\"deleteQuestion\" v-if=\"canUpdate\">\r\n                    Xóa\r\n                </button>\r\n\r\n            </div>\r\n            <div class=\"select-item-subject\">\r\n                <h3 v-if=\"type != 0\">Câu {{ index }}: </h3>\r\n                <div class=\"values-items-subject\">\r\n                    <VueMultiselect v-model=\"valueItemsSubject\" :options=\"listItemsSubject ? listItemsSubject : []\"\r\n                        :multiple=\"true\" :close-on-select=\"false\" :clear-on-select=\"false\" :preserve-search=\"true\"\r\n                        placeholder=\"Chương\" label=\"name\" track-by=\"name\" :preselect-first=\"true\" v-if=\"type == 2\">\r\n                    </VueMultiselect>\r\n                </div>\r\n            </div>\r\n            <h3 v-if=\"type == 0\">Câu hỏi: </h3>\r\n            <LatexComponent :content=\"infoQuestion.question.content\" :isUpdate=\"pressUpdate\"\r\n                @update=\"updateContentQuestion\" :id=\"'question_' + infoQuestion.question.question_id\" />\r\n            <!-- <CommentQuestionComponent :answers=\"question.answers\" /> -->\r\n            <h3 v-if=\"(infoQuestion.question.type == 1 || infoQuestion.question.type == 3) && (type == 3 || type == 2)\">\r\n                Đáp\r\n                án câu hỏi:</h3>\r\n            <LatexComponent :isUpdate=\"canEssay\" @update=\"answerQuestion\"\r\n                :content=\"infoQuestion.question.contentResult != null ? infoQuestion.question.contentResult : ''\"\r\n                :id=\"infoQuestion.question.question_id + '_result_' + infoQuestion.question.result_id\"\r\n                v-if=\"(infoQuestion.question.type == 1 || infoQuestion.question.type == 3) && (type == 3 || type == 2)\"\r\n                class=\"border-green\" />\r\n            <div v-if=\"(type == 1 || type == 3 || type == 4)\">\r\n                <h3>Đáp án của bạn là:</h3>\r\n                <span v-if=\"question.question.type == 2\">Lựa chọn phương án đúng nhất</span>\r\n                <span v-if=\"question.question.type == 1\">Bạn hãy điền đáp án câu hỏi</span>\r\n                <span v-if=\"question.question.type == 3\">Bạn hãy điền lời giải</span>\r\n                <span v-if=\"canUpdate && type != 2 && type != 0\">Bạn hãy nhập đáp án của câu hỏi</span>\r\n            </div>\r\n            <LatexComponent :isUpdate=\"canEssay\" @update=\"answerQuestion\"\r\n                :content=\"infoQuestion.question.answer != null ? infoQuestion.question.answer : ''\"\r\n                :id=\"infoQuestion.question.question_id + '_answer'\"\r\n                v-if=\"(infoQuestion.question.type == 1 || infoQuestion.question.type == 3) && (type == 1 || type == 3)\" />\r\n            <ChooseComponent :ref=\"'chooses_' + infoQuestion.question.question_id\" :choices=\"infoQuestion.choices\"\r\n                :isUpdate=\"pressUpdate\" doTest=\"true\" @update=\"updateChoose\" @create=\"createChoose\"\r\n                @delete=\"deleteAnswer\" @chooseAnswer=\"answerQuestion\" v-if=\"(infoQuestion.question.type == 2)\"\r\n                :type=\"type\" :linkNavbar=\"'page_' + infoQuestion.question.page + '_' + index\"\r\n                :question=\"infoQuestion.question.question_id\" :canChoose=\"canChoose\" />\r\n            <!-- <LatexComponent v-if=\"(infoQuestion.question.type == 1)\" :isUpdate=\"isUpdateEssay\"\r\n            @update=\"data => updateResultEssay(infoQuestion.question.result_id, data)\" /> -->\r\n\r\n            <div class=\"action-question\" v-if=\"pressUpdate\">\r\n                <button class=\"tool-button-test\" @click=\"back\">\r\n                    Trở lại\r\n                </button>\r\n                <button class=\"tool-button-test margin-bottom6px\" @click=\"confirmUpdate\">\r\n                    Lưu\r\n                </button>\r\n            </div>\r\n            <ConfirmComponent v-if=\"confirmModal\" content=\"Bạn có chắc chắn muốn xóa?\" @close=\"confirmModal = false\"\r\n                @confirm=\"confirmDelete\" />\r\n            <CommentQuestionComponent v-if=\"this.infoQuestion.question.scope == 0 && type != 4 && type != 1\"\r\n                :solutions=\"infoQuestion.solutions\"\r\n                :question=\"{ 'id': infoQuestion.question.question_id, 'content': infoQuestion.question.content }\" />\r\n        </div>\r\n        <div class=\"note\" v-if=\"type == 2 || type == 3 || type == 4\">\r\n            <div class=\"note-icon\" @click=\"displayNote = !displayNote\">\r\n                <i class=\"fa-solid fa-circle-exclamation brand-color\"></i>\r\n                <!-- <i class=\"fa-solid fa-caret-left\" v-if=\"!displayNote\"></i>\r\n                <i class=\"fa-solid fa-caret-right\" v-if=\"displayNote\"></i> -->\r\n            </div>\r\n            <Transition name=\"slide-fade\">\r\n                <div class=\"note-teacher-student\" v-if=\"displayNote\">\r\n                    <NoteComponent>\r\n                        <template v-slot:note>\r\n                            <div class=\"note-action\">\r\n                                <div>\r\n                                    <button class=\"note-button\" @click=\"back\">\r\n                                        Lưu\r\n                                    </button>\r\n                                </div>\r\n                                <div class=\"note-content\">\r\n                                    <h4 class=\"title-note\">Ghi chú giáo viên</h4>\r\n                                    <LatexComponent :isUpdate=\"isOwner ? isOwner : false\"\r\n                                        @update=\"updateNoteQuestion\" />\r\n                                </div>\r\n                            </div>\r\n                        </template>\r\n                    </NoteComponent>\r\n                    <NoteComponent>\r\n                        <template v-slot:notes>\r\n                            <div class=\"note-action\">\r\n                                <div class=\"note-content\">\r\n                                    <h4 class=\"title-note\">Ghi chú học sinh</h4>\r\n                                    <LatexComponent :isUpdate=\"isOwner ? !isOwner : false\" @update=\"noteStudent\" />\r\n                                </div>\r\n                                <button class=\"note-button\" @click=\"back\">\r\n                                    Gửi\r\n                                </button>\r\n                            </div>\r\n                        </template>\r\n                    </NoteComponent>\r\n\r\n                </div>\r\n            </Transition>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport ChooseComponent from \"./ChooseComponent.vue\";\r\nimport CommentQuestionComponent from \"./CommentQuestionComponent.vue\";\r\nimport LatexComponent from \"../LatexComponent.vue\";\r\nimport ConfirmComponent from '../common/ConfirmComponent.vue'\r\nimport { ref } from '@vue/reactivity'\r\nimport { handleQuestionTest } from '../../services/question'\r\nimport { Transition } from \"vue\";\r\nimport NoteComponent from \"../common/NoteComponent.vue\";\r\nimport VueMultiselect from 'vue-multiselect'\r\nexport default {\r\n    name: \"QuestionComponent\",\r\n    components: {\r\n        ChooseComponent,\r\n        LatexComponent,\r\n        ConfirmComponent,\r\n        CommentQuestionComponent,\r\n        Transition,\r\n        NoteComponent,\r\n        VueMultiselect\r\n    },\r\n    props: ['question', 'index', 'isNormal', 'type', 'isOwner', 'listItemsSubject'],\r\n    setup() {\r\n        const render = ref(true)\r\n        const confirmModal = ref(false)\r\n        const infoQuestion = ref([])\r\n        const pressUpdate = ref(false)\r\n        const canEssay = ref(false)\r\n        const canUpdate = ref(false)\r\n        const handleQuestion = ref({ 'question': {}, 'answer': {} })\r\n        const writeResult = ref({})\r\n        const result = ref(-1)\r\n        const essayAnswer = ref({})\r\n        const answerUpdate = ref(new Map())\r\n        const answerDelete = ref(new Set())\r\n        const answerCreate = ref(new Map())\r\n        const page = ref(1)\r\n        const canChoose = ref(false)\r\n        const answer = ref(-1)\r\n        const displayNote = ref(false)\r\n        const styleObject = ref({\r\n            \"box-shadow\": \"0 5px #666\",\r\n            \"transform\": \"translateY(4px)\"\r\n        })\r\n        const styleQuestion = ref(\"info-question\")\r\n        const valueItemsSubject = ref([])\r\n        return {\r\n            render, result, writeResult, handleQuestion, essayAnswer, answerUpdate, answerDelete, answerCreate, styleQuestion, confirmModal, pressUpdate, page, styleObject, infoQuestion, canEssay, canUpdate, canChoose, answer, displayNote, valueItemsSubject\r\n        }\r\n    },\r\n\r\n    created() {\r\n        // Câu hỏi thường\r\n        if (this.type == 0) {\r\n            this.canEssay = this.isUpdateEssay;\r\n            this.canChoose = false;\r\n\r\n        }\r\n        // Câu hỏi thi\r\n        if (this.type == 1) {\r\n            this.canUpdate = false\r\n            this.canEssay = true\r\n            this.canChoose = true;\r\n        }\r\n        // Câu hỏi cập nhật\r\n        if (this.type == 2) {\r\n            this.canUpdate = true\r\n            this.canEssay = false\r\n            this.canChoose = true;\r\n        }\r\n        // Câu hỏi lịch sử làm bài\r\n        if (this.type == 3) {\r\n            this.canEssay = false\r\n            this.canChoose = false\r\n        }\r\n        if (this.type == 4) {\r\n            this.canEssay = false\r\n            this.canChoose = false\r\n        }\r\n\r\n        this.infoQuestion = JSON.parse(JSON.stringify(this.question));\r\n        this.handleQuestion.question = this.question.question\r\n        this.page = this.question.page\r\n    },\r\n    mounted() {\r\n\r\n        if (this.type == 1) {\r\n            if (this.question.question.type == 2) {\r\n                if (this.question.question?.answer != null) {\r\n                    let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.question.question.answer)\r\n                    choose.click()\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.type == 2) {\r\n            if (this.question.question.type == 2) {\r\n                if (this.question.question?.result_id != null && this.question.question?.result_id != \"\") {\r\n                    let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.question.question.result_id)\r\n                    choose.click()\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.type == 3) {\r\n            if (this.question.question?.result_id != null) {\r\n                if (this.question.question.type == 2) {\r\n                    if (this.question.question.answer != null) {\r\n                        console.log(\"OK\")\r\n                        if (this.question.question.result_id == this.question.question.answer) {\r\n                            let choose = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.answer)\r\n                            choose.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                            let question = document.getElementById(\"question_\" + this.question.question.question_id)\r\n                            question.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                        } else {\r\n                            let chooseCorrect = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.result_id)\r\n                            chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                            let chooseFalse = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.answer)\r\n                            chooseFalse.style.border = \"4px solid red\"\r\n\r\n                            let question = document.getElementById(\"question_\" + this.question.question.question_id)\r\n                            question.style.border = \"4px solid red\"\r\n                        }\r\n                    } else {\r\n                        let chooseCorrect = document.getElementById(this.question.question.question_id + '_choose_' + this.infoQuestion.question.result_id)\r\n                        chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                    }\r\n                }\r\n                if (this.question.question.type == 1) {\r\n                    if (this.question.question.contentResult == this.question.question.answer) {\r\n                        let chooseCorrect = document.getElementById(this.question.question.question_id + '_result_' + this.infoQuestion.question.result_id)\r\n                        chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                        let chooseAnswer = document.getElementById(this.question.question.question_id + '_answer')\r\n                        chooseAnswer.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                    } else {\r\n                        let chooseCorrect = document.getElementById(this.question.question.question_id + '_result_' + this.infoQuestion.question.result_id)\r\n                        chooseCorrect.style.border = \"4px solid rgb(16, 249, 4)\"\r\n                        let chooseFalse = document.getElementById(this.question.question.question_id + '_answer')\r\n                        chooseFalse.style.border = \"4px solid red\"\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        back() {\r\n            this.pressUpdate = false\r\n            this.canEssay = false\r\n            this.render = false\r\n            this.canChoose = false\r\n            this.handleQuestion = ref({})\r\n            this.writeResult = ref({})\r\n            this.essayAnswer = ref({})\r\n            this.answerUpdate = ref(new Map())\r\n            this.answerDelete = ref(new Set())\r\n            this.answerCreate = ref(new Map())\r\n            this.answer = ref(-1)\r\n            this.$nextTick(() => {\r\n                this.render = true\r\n            })\r\n        },\r\n        answerQuestion(answer) {\r\n            this.answer = answer\r\n        },\r\n\r\n        publicQuestion() {\r\n\r\n        },\r\n        updateQuestion() {\r\n            this.pressUpdate = true;\r\n            this.canEssay = true;\r\n            this.canChoose = true\r\n        },\r\n        updateContentQuestion(data) {\r\n            // this.questionUpdate.id = this.infoQuestion.question.question_id\r\n            this.handleQuestion.question.content = data\r\n            // this.questionUpdate.id = this.infoQuestion.question.question_id\r\n        },\r\n        updateChoose(choose) {\r\n            if (('' + choose.id).includes('new')) {\r\n                choose.question_id = this.infoQuestion.question.question_id\r\n                this.answerCreate.set(choose.id, choose)\r\n            } else {\r\n                choose.question_id = this.infoQuestion.question.question_id\r\n                this.answerUpdate.set(choose.id, choose)\r\n            }\r\n        },\r\n\r\n        createChoose(data) {\r\n            data.question_id = this.infoQuestion.question.question_id\r\n            this.answerCreate.set(data.id, data)\r\n        },\r\n        deleteAnswer(id) {\r\n            if (this.infoQuestion.question.type == 2) {\r\n                if (id == this.infoQuestion.question.result_id || this.infoQuestion.question.result_id == null) {\r\n                    this.answer = null\r\n                }\r\n            }\r\n            if (('' + id).includes('new')) {\r\n                // Xóa câu hỏi trắc nghiệm mới tạo\r\n                this.answerCreate.delete(id)\r\n            } else {\r\n                if (this.answerUpdate.get(id) != undefined) {\r\n                    this.answerUpdate.delete(id)\r\n                }\r\n                this.answerDelete.add(id)\r\n            }\r\n\r\n        },\r\n        deleteQuestion() {\r\n            this.pressUpdate = false;\r\n            this.confirmModal = true;\r\n        },\r\n        confirmDelete() {\r\n            const idQuestion = this.question.question.question_id\r\n            const deleteQuestion = {\r\n                'id': idQuestion,\r\n                'index': this.index,\r\n            }\r\n            if (this.infoQuestion.question.type == 2) {\r\n                this.infoQuestion.choices.forEach(choose => {\r\n                    this.deleteAnswer(choose.id)\r\n                });\r\n            } else {\r\n                this.deleteAnswer(this.infoQuestion.question.result_id)\r\n\r\n            }\r\n            this.$emit(\"delete\", deleteQuestion);\r\n            this.confirmModal = false;\r\n        },\r\n        async confirmUpdate() {\r\n            this.pressUpdate = false\r\n            this.canEssay = false\r\n            this.canChoose = false\r\n            if (this.infoQuestion.question.type == 2) {\r\n                this.handleQuestion.question.result_id = this.answer\r\n            } else {\r\n                this.handleQuestion.question.contentResult = this.answer\r\n                if (Number.isInteger(this.infoQuestion.question.result_id)) {\r\n                    let data = {\r\n                        question_id: this.infoQuestion.question.question_id,\r\n                        id: this.infoQuestion.question.result_id,\r\n                        content: this.answer\r\n                    }\r\n                    this.answerUpdate.set(this.infoQuestion.question.result_id, data)\r\n                } else {\r\n                    let data = {\r\n                        question_id: this.infoQuestion.question.question_id,\r\n                        id: this.infoQuestion.question.result_id,\r\n                        content: this.answer\r\n                    }\r\n                    this.answerCreate.set(this.infoQuestion.question.result_id, data)\r\n                }\r\n            }\r\n            this.handleQuestion.answer.create = Array.from(this.answerCreate.values())\r\n            this.handleQuestion.answer.update = Array.from(this.answerUpdate.values())\r\n            console.log(\"Update choose\")\r\n            console.log(this.handleQuestion.answer.update)\r\n            this.handleQuestion.answer.delete = Array.from(this.answerDelete.values())\r\n            console.log(\"Send Data\")\r\n            console.log(this.handleQuestion)\r\n            const response = await handleQuestionTest(this.handleQuestion)\r\n            this.infoQuestion = response.data\r\n            this.render = false\r\n            this.$nextTick(() => {\r\n                this.render = true\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.select-item-subject {\r\n    display: flex;\r\n}\r\n\r\n.values-items-subject {\r\n    margin-left: 5px;\r\n    min-width: 200px;\r\n}\r\n\r\n.info-question {\r\n    background-color: #222;\r\n    color: white;\r\n    margin-top: 15px;\r\n    padding: 15px;\r\n    border-style: solid;\r\n    border-color: #666363;\r\n    display: flex;\r\n}\r\n\r\n.question-not-note {\r\n    flex: 1 1 70%;\r\n}\r\n\r\n.note-icon {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    background-color: #545151;\r\n    margin-left: 2px;\r\n    margin-right: 2px;\r\n    border-start-start-radius: 60%;\r\n    border-end-start-radius: 60%;\r\n}\r\n\r\n.note {\r\n    display: flex;\r\n    margin-left: 2px;\r\n}\r\n\r\n.note-action {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n}\r\n\r\n.note-teacher-student {\r\n    width: 100%;\r\n    min-width: 300px;\r\n    flex: 1 1 30%;\r\n}\r\n\r\n@import url('https://fonts.googleapis.com/css2?family=Kalam&display=swap');\r\n\r\n.title-note {\r\n    font-family: 'Kalam', cursive;\r\n}\r\n\r\n.note-content {\r\n    width: 100%;\r\n    margin-left: 4px;\r\n    margin-right: 4px;\r\n    overflow-y: scroll;\r\n}\r\n\r\n.slide-fade-enter-active {\r\n    transition: all 0.3s ease-out;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n    transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n    transform: translateX(20px);\r\n    opacity: 0;\r\n}\r\n\r\n.info-question-correct {\r\n    background-color: #222;\r\n    color: white;\r\n    margin-top: 15px;\r\n    padding: 15px;\r\n    border-style: solid;\r\n    border-color: #666363;\r\n}\r\n\r\n.action-question {\r\n    margin-top: 2px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.info-question-false {\r\n    background-color: #222;\r\n    color: white;\r\n    margin-top: 15px;\r\n    padding: 15px;\r\n    border-style: solid;\r\n    border-color: #666363;\r\n}\r\n\r\n.brand-color {\r\n    color: #ea4f4c;\r\n}\r\n\r\n.tool-button-test {\r\n    margin-left: 2px;\r\n    margin-top: 2px;\r\n    height: 35px;\r\n    box-shadow: 0 8px #999;\r\n    border-radius: 5px;\r\n    border: 2px solid #ea4f4c;\r\n    background-color: #222;\r\n    color: white;\r\n    text-align: center;\r\n    justify-content: center;\r\n    text-decoration: none;\r\n}\r\n\r\n.tool-button-test:active {\r\n    box-shadow: 0 5px #666;\r\n    transform: translateY(4px);\r\n}\r\n\r\n.margin-bottom6px {\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.border-green {\r\n    border: 2px solid rgb(8, 196, 40);\r\n}\r\n\r\n@import url('vue-multiselect/dist/vue-multiselect.css');\r\n</style>"]},"metadata":{},"sourceType":"module"}