"use strict";(self["webpackChunkstudyweb"]=self["webpackChunkstudyweb"]||[]).push([[2212],{4941:function(t,e,n){n.d(e,{C6:function(){return s},g7:function(){return r},jN:function(){return u},lT:function(){return d},qY:function(){return o},un:function(){return i}});var a=n(4471);function i(t){return console.log(t),(0,a.Z)({url:"/exam/createNew",method:"post",data:t})}function s(t){return console.log(t),(0,a.Z)({url:"/exam/do",method:"put",data:t})}function o(t,e){return(0,a.Z)({url:"/test/"+t+"/exam",method:"get",params:e})}function r(t,e){return(0,a.Z)({url:"/exam/"+t+"/mark",method:"PUT",data:e})}function u(t,e){return(0,a.Z)({url:"/test/"+t+"/submit",method:"put",data:e})}function d(t){return(0,a.Z)({url:"/exam/"+t+"/report",method:"GET"})}},2445:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var a=n(3396),i=n(7139);const s={class:"info-list-question"},o=(0,a._)("h1",null,"Làm bài thi",-1),r={class:"page"},u={class:"end-action"};function d(t,e,n,d,l,c){const h=(0,a.up)("NavbarListComponent"),m=(0,a.up)("LoadingComponent"),g=(0,a.up)("QuestionComponent"),p=(0,a.up)("paginate");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(h,{numericalQuestion:d.numericalQuestion,onMoveQuestion:c.moveQuestion},null,8,["numericalQuestion","onMoveQuestion"]),(0,a._)("div",s,[o,d.isLoading?((0,a.wg)(),(0,a.j4)(m,{key:0})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",r,[(0,a._)("h2",null," Trang "+(0,i.zw)(d.currentPage),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.questions,((t,e)=>((0,a.wg)(),(0,a.j4)(g,{key:e,question:t,ref_for:!0,ref:"question_"+t.question.question_id,id:"question_"+t.question.question_id,index:d.startIndex+e,type:1},null,8,["question","id","index"])))),128)),(0,a._)("div",u,[d.canUpdate?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"update-create-question-button",onClick:e[0]||(e[0]=(...t)=>c.save&&c.save(...t))}," Lưu câu trả lời ")):(0,a.kq)("",!0),d.currentPage==d.totalPage?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"update-create-question-button",onClick:e[1]||(e[1]=(...t)=>c.submit&&c.submit(...t))}," Nộp bài ")):(0,a.kq)("",!0)]),(0,a.Wm)(p,{"page-count":d.totalPage,"page-range":3,"margin-pages":2,"click-handler":c.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item","active-class":"active-class"},null,8,["page-count","click-handler"])],64))])],64)}var l=n(1736),c=n(4501),h=n(1302),m=n(6015),g=n(4941),p=n(4870),w=n(2483),f=n(8812),x=n(7389),q={name:"DoExamComponent",inheritAttrs:!1,components:{QuestionComponent:l.Z,paginate:c.Z,NavbarListComponent:x.Z,LoadingComponent:f.Z},setup(){const t=parseInt((0,w.yj)().params.idTest),e=(0,p.iH)(!1),n=(0,p.iH)(!0),a=(0,p.iH)(!1),i=(0,p.iH)([]),s=(0,p.iH)(1),o=(0,p.iH)(1),r=(0,p.iH)(1),u=(0,p.iH)([]),d=(0,p.iH)(""),l=(0,p.iH)(!0),c=(0,p.iH)(0),h=(0,p.iH)([]),m=(0,p.iH)({answers:new Set});return{idTest:t,isLoading:e,canUpdate:n,isUpdateEssay:a,questions:i,currentPage:s,totalPage:o,startIndex:r,numericalQuestion:u,moveTo:d,indexNewQuestion:c,answersData:h,sendData:m,render:l}},data(){return{examId:null}},created(){this.$watch((()=>this.$route.query),(()=>{this.handleGetData()}))},mounted(){this.handleGetData()},methods:{refreshData(){this.listQuestionFollow=new Set,this.questionsDelete=[],this.sendData={answers:new Set}},async handleGetData(){var t={current_page:this.currentPage};try{const n=await(0,h.pX)(this.idTest,t);if(n){this.questions=n.data?.questions,this.answersData=n.data?.answers,this.examId=n.data?.exam_id,console.log(n.data?.pages);let t=n.data?.pages;this.startIndex=t.startIndex,this.totalPage=t.totalPage}var e={exam_id:this.examId,current_page:this.currentPage,type:1};const a=await(0,m.Jp)(this.idTest,e);a&&(this.numericalQuestion=a.data)}finally{this.isLoading=!1}},clickCallback(t){this.currentPage=t,this.handleGetData()},Next(t){this.page=t,this.handleGetData()},Prev(t){this.page=t,this.handleGetData()},moveQuestion(t,e){if(t==this.currentPage){this.moveTo=e;let t=document.getElementById(e);t.scrollIntoView()}else this.currentPage=t,this.moveTo=e,this.handleGetData(),setTimeout((()=>{let t=document.getElementById(e);t.scrollIntoView()}),1e3)},async save(){this.questions.forEach((t=>{let e=this.$refs["question_"+t.question.question_id];if(-1!=e[0].answer){let n={question_id:t.question.question_id,answer:e[0].answer};this.sendData.answers.add(n)}})),await(0,g.C6)({exam_id:this.examId,current_page:this.currentPage,answers:Array.from(this.sendData.answers)}),this.handleGetData(),this.refreshData(),this.render=!1,this.$nextTick((()=>{this.render=!0}))},async submit(){await(0,g.jN)(this.idTest,{examId:this.examId})}}},v=n(89);const D=(0,v.Z)(q,[["render",d]]);var k=D}}]);
//# sourceMappingURL=2212.b65377fa.js.map