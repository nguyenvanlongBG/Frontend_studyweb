"use strict";(self["webpackChunkstudyweb"]=self["webpackChunkstudyweb"]||[]).push([[294],{294:function(e,t,s){s.r(t),s.d(t,{default:function(){return we}});var i=s(3396),n=s(7139);const a=e=>((0,i.dD)("data-v-693b9dc6"),e=e(),(0,i.Cn)(),e),l={class:"info-list-question"},o=a((()=>(0,i._)("h1",null,"Chỉnh sửa đề thi",-1))),d={class:"page"},c={class:"menu-create"},u={key:0,class:"choice-type-create"},r={class:"end-action"},p={class:"menu-create-end"},h={key:0,class:"choice-type-create"};function m(e,t,s,a,m,y){const _=(0,i.up)("NavbarListComponent"),g=(0,i.up)("QuestionBankComponent"),v=(0,i.up)("ModalImportTest"),k=(0,i.up)("LoadingComponent"),b=(0,i.up)("QuestionComponent"),q=(0,i.up)("paginate");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(_,{numericalQuestion:a.numericalQuestion,onMoveQuestion:y.moveQuestion},null,8,["numericalQuestion","onMoveQuestion"]),a.isDisplayBank?((0,i.wg)(),(0,i.j4)(g,{key:0,onClose:y.closeBank},null,8,["onClose"])):(0,i.kq)("",!0),a.displayImport?((0,i.wg)(),(0,i.j4)(v,{key:1,onClose:t[0]||(t[0]=e=>a.displayImport=!1),onSubmit:t[1]||(t[1]=e=>y.reload())})):(0,i.kq)("",!0),(0,i._)("div",l,[o,a.isLoading?((0,i.wg)(),(0,i.j4)(k,{key:0})):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i._)("div",d,[(0,i._)("h2",null," Trang "+(0,n.zw)(a.currentPage),1),(0,i._)("div",c,[a.displayTypeCreateFirst?((0,i.wg)(),(0,i.iD)("div",u,[a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"create-button-type",onClick:t[2]||(t[2]=e=>y.createQuestion(2))}," Trắc nghiệm ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"create-button-type",onClick:t[3]||(t[3]=e=>y.createQuestion(1))}," Điền đáp án ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:2,class:"create-button-type",onClick:t[4]||(t[4]=e=>y.createQuestion(3))}," Tự luận ")):(0,i.kq)("",!0)])):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"create-button-first",onClick:t[5]||(t[5]=(...e)=>y.displayCreateQuestionTypeFirst&&y.displayCreateQuestionTypeFirst(...e))}," Tạo câu hỏi ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"create-button-first",onClick:t[6]||(t[6]=(...e)=>y.displayBank&&y.displayBank(...e))}," + Ngân hàng ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("button",{key:3,class:"create-button-first",onClick:t[7]||(t[7]=e=>a.displayImport=!0)}," Import ")):(0,i.kq)("",!0)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.questions,((s,n)=>((0,i.wg)(),(0,i.j4)(b,{key:n,question:s,ref_for:!0,ref:"question_"+s.question.question_id,onCreate:y.createQuestion,onUpdate:t[8]||(t[8]=t=>e.updateQuestion()),onDelete:y.deleteQuestion,onAddlistQuestionFollow:y.addlistQuestionFollow,id:"question_"+s.question.question_id,index:a.startIndex+n,type:2,isOwner:a.isOwner,chaptersSubject:m.chaptersSubject,onSeeSolution:e.seeSolution},null,8,["question","onCreate","onDelete","onAddlistQuestionFollow","id","index","isOwner","chaptersSubject","onSeeSolution"])))),128)),(0,i._)("div",r,[(0,i._)("div",p,[a.displayTypeCreateEnd?((0,i.wg)(),(0,i.iD)("div",h,[a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"create-button-type",onClick:t[9]||(t[9]=e=>y.createQuestion(2))}," Trắc nghiệm ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"create-button-type",onClick:t[10]||(t[10]=e=>y.createQuestion(1))}," Điền đáp án ")):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("div",{key:2,class:"create-button-type",onClick:t[11]||(t[11]=e=>y.createQuestion(3))}," Tự luận ")):(0,i.kq)("",!0)])):(0,i.kq)("",!0),a.canUpdate?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"update-create-question-button",onClick:t[12]||(t[12]=(...e)=>y.displayCreateQuestionTypeEnd&&y.displayCreateQuestionTypeEnd(...e))}," Thêm câu hỏi ")):(0,i.kq)("",!0)]),a.canUpdate&&a.currentPage==a.totalPage?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"update-create-question-button",onClick:t[13]||(t[13]=(...e)=>y.addPage&&y.addPage(...e))}," Thêm trang ")):(0,i.kq)("",!0)]),(0,i.Wm)(q,{"page-count":a.totalPage,"page-range":3,"margin-pages":2,"click-handler":y.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item","active-class":"active-class"},null,8,["page-count","click-handler"])],64))])],64)}s(7658);var y=s(6404),_=s(4501),g=s(1302),v=s(6015),k=s(4471);function b(e){return(0,k.Z)({url:"/subject/"+e+"/items",method:"get"})}var q=s(4870),w=s(2483),C=s(8812),Q=s(7389),f=s(9242);const D=e=>((0,i.dD)("data-v-85012870"),e=e(),(0,i.Cn)(),e),T={class:"modal-bank-overlay"},I={class:"close-button"},x={class:"container-list-exam"},H={class:"header-list-exams"},P=D((()=>(0,i._)("h1",null," Ngân hàng câu hỏi ",-1))),A={class:"filters"},S={class:"filter"},F={class:"filter"},U={class:"filter"},j=D((()=>(0,i._)("i",{class:"fa-solid fa-filter"},null,-1))),B={class:"container-table"},O={class:"table"},E={class:"table-header"},L={class:"header__item choice-question-label"},M=D((()=>(0,i._)("a",{id:"name",class:"filter__link",href:"#"},null,-1))),G={class:""},Z=D((()=>(0,i._)("span",{style:{"text-transform":"none"}}," Tất cả",-1))),N=(0,i.uE)('<div class="header__item question-content-label" data-v-85012870><a id="wins" class="filter__link filter__link--number" href="#" data-v-85012870>Câu hỏi</a></div><div class="header__item chapter-label" data-v-85012870><a id="draws" class="filter__link filter__link--number" href="#" data-v-85012870>Chương</a></div><div class="header__item level-label" data-v-85012870><a id="losses" class="filter__link filter__link--number" href="#" data-v-85012870>Mức độ</a></div><div class="header__item folder-label" data-v-85012870><a id="total" class="filter__link filter__link--number" href="#" data-v-85012870>Folder</a></div><div class="header__item used-label" data-v-85012870><a id="total" class="filter__link filter__link--number" href="#" data-v-85012870>Đã sử dụng gần đây</a></div>',5),K={class:"table-content"},R={class:"table-data-choice"},$=["id","checked","value"],V={class:"table-data-question-content"},W={class:"content-question"},Y=D((()=>(0,i._)("div",{class:"table-data-chapter"},"OK",-1))),z=D((()=>(0,i._)("div",{class:"table-data-level"},"OK",-1))),X=D((()=>(0,i._)("div",{class:"table-data-folder"}," Lớp 12 2023 ",-1))),J=D((()=>(0,i._)("div",{class:"table-data-used"}," Đề 1 ",-1)));function ee(e,t,s,a,l,o){const d=(0,i.up)("VueMultiselect"),c=(0,i.up)("QuestionComponent");return(0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("div",I,[(0,i._)("button",{onClick:t[0]||(t[0]=e=>o.close()),class:"close-modal-solution"},"X")]),(0,i._)("div",x,[(0,i._)("div",H,[P,(0,i._)("div",A,[(0,i._)("div",S,[(0,i.Wm)(d,{options:l.listFilters,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Folder",label:"name","track-by":"name","preselect-first":!0},null,8,["options"])]),(0,i._)("div",F,[(0,i.Wm)(d,{options:l.listFilters,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Chương",label:"name","track-by":"name","preselect-first":!0},null,8,["options"])]),(0,i._)("div",U,[(0,i.Wm)(d,{options:l.listFilters,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Mức độ",label:"name","track-by":"name","preselect-first":!0},null,8,["options"])]),(0,i._)("button",{class:"status-mark",style:(0,n.j5)(e.pressAll?e.styleObject:""),onClick:t[1]||(t[1]=t=>e.filterStatus(0))},[j,(0,i.Uk)(" Lọc ")],4)])]),(0,i._)("div",B,[(0,i._)("div",O,[(0,i._)("div",E,[(0,i._)("div",L,[M,(0,i._)("div",G,[a.displayAdd?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"status-mark",style:(0,n.j5)(e.pressAll?e.styleObject:""),onClick:t[2]||(t[2]=t=>e.filterStatus(0))}," Thêm ",4)):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i.wy)((0,i._)("input",{name:"selectAll","onUpdate:modelValue":t[3]||(t[3]=e=>l.selectAll=e),type:"checkbox",class:"choice-question",value:"1"},null,512),[[f.e8,l.selectAll]]),Z])])]),N]),(0,i._)("div",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.questions,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"table-row",key:s},[(0,i._)("div",R,[(0,i.wy)((0,i._)("input",{id:e.question_id,name:"selectQuestions","onUpdate:modelValue":t[4]||(t[4]=e=>l.selectQuestions=e),checked:l.selectAll[0],type:"checkbox",value:e.question.question_id,class:"choice-question"},null,8,$),[[f.e8,l.selectQuestions]])]),(0,i._)("div",V,[(0,i._)("div",W,[(0,i.Wm)(c,{question:e,type:"5",isOwner:"true"},null,8,["question"])])]),Y,z,X,J])))),128))])])])])])}var te=s(6368),se={name:"QuestionBankComponent",components:{VueMultiselect:te.ZP,QuestionComponent:y.Z},setup(){const e=(0,q.iH)(!1),t=(0,q.iH)({}),s=(0,q.iH)(!0);return{displayAdd:e,solution:t,render:s}},watch:{selectAll(){this.displayAdd=!this.displayAdd,this.selectAll[0]?(this.questions.forEach((e=>{this.selectQuestions.add(e.question.question_id)})),console.log(this.selectQuestions)):this.selectQuestions=new Set},selectQuestions(){0!=this.selectQuestions.size?this.displayAdd=!0:this.displayAdd=!1,console.log("Question Select"),console.log(this.selectQuestions)}},computed:{},data(){return{selectAll:[],selectQuestions:new Set,listFilters:[{id:1,name:"OK"}],questions:[{question:{question_id:1,content:"OK1",page:1,type:1,index:1,result_id:"",contentResult:"",scope:1,dependence_id:1}},{question:{question_id:2,content:"OK2",page:1,type:2,index:1,result_id:"",contentResult:"",scope:1,dependence_id:1},choices:[{id:3,question_id:2,content:"<p>Phương án A</p>"},{id:4,question_id:2,content:"<p>Phương án B</p>"},{id:5,question_id:2,content:"<p>Phương án C</p>"},{id:6,question_id:2,content:"<p>Phương án D</p>"}]}]}},mounted(){this.handleGetData()},props:["idSolution"],methods:{async handleGetData(){},close(){this.$emit("close")},answerQuestion(){}}},ie=s(89);const ne=(0,ie.Z)(se,[["render",ee],["__scopeId","data-v-85012870"]]);var ae=ne;const le=e=>((0,i.dD)("data-v-91ad66ce"),e=e(),(0,i.Cn)(),e),oe={class:"modal-bank-overlay"},de={class:"container-create-review"},ce={class:"close-button"},ue={class:"container-list-question"},re={class:"body-container-create-review"},pe=le((()=>(0,i._)("h3",null,"Nội dung",-1))),he={class:"container-choice-topic"},me={class:"flex-end"};function ye(e,t,s,n,a,l){const o=(0,i.up)("LatexComponent");return(0,i.wg)(),(0,i.iD)("div",oe,[(0,i._)("div",de,[(0,i._)("div",ce,[(0,i._)("button",{onClick:t[0]||(t[0]=e=>l.close()),class:"close-modal-solution"},"X")]),(0,i._)("div",ue,[(0,i._)("div",null,[(0,i._)("div",re,[pe,(0,i._)("div",he,[(0,i.Wm)(o,{isUpdate:!0,content:a.content,onUpdate:e.update,ref:"dataUpload"},null,8,["content","onUpdate"])]),(0,i._)("div",me,[(0,i._)("button",{class:"button",onClick:t[1]||(t[1]=e=>l.close())}," Trở lại "),(0,i._)("button",{class:"button",onClick:t[2]||(t[2]=e=>l.upload())}," OK ")])])])])])])}var _e=s(592),ge={name:"ModalImportTest",components:{LatexComponent:_e.Z},setup(){const e=(0,q.iH)(1),t=(0,w.yj)().params.idTest,s=(0,q.iH)(1),i=(0,q.iH)(!1),n=(0,q.iH)({}),a=(0,q.iH)(!0);return{testId:t,typeCreate:e,step:s,displayAdd:i,solution:n,render:a}},watch:{selectAll(){this.displayAdd=!this.displayAdd,this.selectAll[0]?(this.questions.forEach((e=>{this.selectQuestions.add(e.question.question_id)})),console.log(this.selectQuestions)):this.selectQuestions=new Set},selectQuestions(){0!=this.selectQuestions.size?this.displayAdd=!0:this.displayAdd=!1,console.log("Question Select"),console.log(this.selectQuestions)}},computed:{},data(){return{content:'<p>Bài 1&nbsp;<math xmlns="http://www.w3.org/1998/Math/MathML"><munder><mi>lim</mi><mrow><mn>1</mn><mo>→</mo><mo>∞</mo></mrow></munder></math></p>',selectAll:[],selectQuestions:new Set,listFilters:[{id:1,name:"OK"}]}},mounted(){this.handleGetData()},props:["idSolution"],methods:{async handleGetData(){},close(){this.$emit("close")},addTopicLevel(){this.topics.push({id:4,name:{id:"",name:""},level:{id:"",name:""}})},async upload(){let e={document:this.$refs.dataUpload["editorData"]};console.log(e),await(0,v.Yq)(this.testId,e),this.close(),this.$emit("submit")}}};const ve=(0,ie.Z)(ge,[["render",ye],["__scopeId","data-v-91ad66ce"]]);var ke=ve,be={name:"UpdateTestComponent",components:{QuestionComponent:y.Z,paginate:_.Z,NavbarListComponent:Q.Z,QuestionBankComponent:ae,LoadingComponent:C.Z,ModalImportTest:ke},props:["testId"],data(){return{chaptersSubject:[]}},setup(){const e=null,t=(0,q.iH)(!1),s=(0,q.iH)(!0),i=(0,q.iH)([]),n=(0,q.iH)(1),a=(0,q.iH)(1),l=(0,q.iH)(1),o=(0,q.iH)([]),d=(0,q.iH)(""),c=(0,q.iH)(new Set),u=(0,q.iH)([]),r=(0,q.iH)(!0),p=(0,q.iH)(0),h=(0,q.iH)(!1),m=(0,q.iH)(!1),y=(0,q.iH)(!1),_=(0,q.iH)(!1),g=(0,q.iH)(!1),v=(0,q.iH)(null),k=(0,q.iH)(!1),b=(0,q.iH)({questions:{create:[],update:[],delete:[],deleteResults:[],updateResults:[]},choices:{create:[],update:[],delete:[]}});return{idTest:e,test:v,isLoading:t,canUpdate:s,questions:i,currentPage:n,totalPage:a,startIndex:l,numericalQuestion:o,moveTo:d,listQuestionFollow:c,questionsDelete:u,sendData:b,indexNewQuestion:p,displayTypeCreateFirst:h,displayTypeCreateEnd:m,displaySolution:y,displayImport:_,isOwner:g,isDisplayBank:k,render:r}},created(){this.testId?this.idTest=this.testId:this.idTest=parseInt((0,w.yj)().params.idTest)},create(){this.$watch((()=>this.$route.query),(()=>{this.handleGetData()}))},mounted(){this.getItems(),this.handleGetData()},methods:{refreshData(){this.listQuestionFollow=new Set,this.questionsDelete=[],this.sendData={questions:{create:[],update:[],delete:[],deleteResult:[],updateResults:[]},choices:{create:[],update:[],delete:[]}}},async handleGetData(){var e={current_page:this.currentPage};try{const s=await(0,g.XM)(this.idTest,e);if(s){this.questions=s.data?.questions,this.itemsSubject=s.data?.itemsSubject,this.isOwner=s.data?.isOwner;let e=s.data?.pages;this.startIndex=e.startIndex,this.currentPage=e.currentPage,this.totalPage=e.totalPage}var t={current_page:this.currentPage,type:2};const i=await(0,v.Jp)(this.idTest,t);i&&(this.numericalQuestion=i.data)}finally{this.isLoading=!1}},async getItems(){const e=await(0,v.yD)(this.idTest);this.test=e.data;const t=await b(this.test.subject_id);this.chaptersSubject=t.data},addlistQuestionFollow(e){console.log(e),this.listQuestionFollow.add(e)},choiceAnswer(e){var t=document.getElementById("question_"+e);t.classList.add("answer-content-choice")},clickCallback(e){console.log(e),this.currentPage=e,this.handleGetData()},async addPage(){this.totalPage+=1;let e={id:this.idTest,total_page:this.totalPage};try{await(0,v.ab)(e),this.clickCallback(parseInt(this.currentPage)+1)}catch(t){console.log(t)}finally{this.refreshData()}},Next(e){this.currentPage=e,this.handleGetData()},Prev(e){this.currentPage=e,this.handleGetData()},displayBank(){this.isDisplayBank=!0},closeBank(){this.isDisplayBank=!1},displayCreateQuestionTypeFirst(){this.displayTypeCreateFirst=!this.displayTypeCreateFirst},displayCreateQuestionTypeEnd(){this.displayTypeCreateEnd=!this.displayTypeCreateEnd},createQuestion(e){let t={items:[]};t.question={question_id:"new_"+this.indexNewQuestion,page:this.currentPage,type:e,index:this.questions.length,result_id:-1,contentResult:"",scope:1,dependence_id:this.idTest},1!=e&&3!=e||(t.question.result_id="new"),this.indexNewQuestion++,t.choices=[],this.questions.push(t);let s={id:t.question.question_id,page:this.currentPage,index:this.questions.length,type:0};this.numericalQuestion.data.splice(this.startIndex+this.questions.length-2,0,s),setTimeout((()=>{let e=document.getElementById("question_"+t.question.question_id);this.displayTypeCreateFirst=!1,this.displayTypeCreateEnd=!1,e.scrollIntoView()}),500)},deleteQuestion(e){this.render=!1,this.questions.splice(e.index-this.startIndex,1),this.numericalQuestion.data.splice(e.index,1);let t=this.$refs["question_"+e.id][0];void 0!=e.result&&this.sendData.deleteResults.push(e.result),(""+e.id).includes("new_")?void 0!==this.questionsCreate.get(e.id)&&this.questionsCreate.delete(e.id):(this.sendData.choices.delete=[...Array.from(t.chooseDelete)],this.questionsDelete.push(e.id)),this.$nextTick((()=>{this.render=!0}))},moveQuestion(e,t){if(e==this.currentPage){this.moveTo=t;let e=document.getElementById(t);e.scrollIntoView()}else this.currentPage=e,this.moveTo=t,this.handleGetData(),setTimeout((()=>{let e=document.getElementById(t);e.scrollIntoView()}),1e3)},reload(){this.questions=[],this.refreshData(),this.handleGetData()}}};const qe=(0,ie.Z)(be,[["render",m],["__scopeId","data-v-693b9dc6"]]);var we=qe}}]);
//# sourceMappingURL=294.e972f636.js.map